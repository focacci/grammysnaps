/* PhotoView - Optimized Styles */
.photo-view {
  width: 100%; /* Take full width of parent container */
  height: 100%; /* Take full height of parent container */
  flex: 1; /* Take up remaining space in flex container */
  background-color: var(
    --bg-primary
  ); /* Theme-aware primary background color */
}

/* Mobile body scroll prevention */
@media (max-width: 768px) {
  .photo-view {
    overflow: hidden; /* Prevent any scrolling at the top level on mobile */
    height: 100%; /* Maintain full height on mobile */
    /* Ensure we don't create scroll conflicts */
    position: relative; /* Establish positioning context for child elements */
  }
}

/* Prevent body scroll when modal is open */
body.modal-open {
  overflow: hidden; /* Disable body scrolling when modal is displayed */
  /* Prevent scrolling on mobile */
  touch-action: none; /* Disable touch gestures that cause scrolling */
  /* Prevent bounce effect on iOS */
  position: fixed; /* Lock body position to prevent scroll */
  width: 100%; /* Maintain full width when position is fixed */
}

/* Reset body scroll prevention on desktop */
@media (min-width: 769px) {
  body.modal-open {
    position: static; /* Reset to normal positioning on desktop */
    touch-action: auto; /* Re-enable touch actions on desktop */
  }
}

/* Loading and Error States */
.loading-container,
.error-container {
  display: flex; /* Use flexbox for centering content */
  align-items: center; /* Vertically center content */
  justify-content: center; /* Horizontally center content */
  height: calc(100vh - 80px); /* Full viewport height minus navbar */
}

.loading-spinner {
  font-size: 1.2rem; /* Large font size for visibility */
  color: var(--primary-orange); /* Orange color for brand consistency */
}

.error-message {
  text-align: center; /* Center-align all text in error message */
  padding: 2rem; /* Comfortable padding around error content */
  background: var(--bg-primary); /* Theme-aware background */
  border-radius: 8px; /* Rounded corners for modern appearance */
  box-shadow: var(--shadow-md); /* Medium shadow for depth */
  border: 1px solid var(--border-light); /* Light border for definition */
}

.error-message h3 {
  color: #d32f2f; /* Red color for error emphasis */
  margin-bottom: 1rem; /* Space below error heading */
}

.error-message p {
  color: var(--text-secondary); /* Secondary text color for description */
  margin-bottom: 1.5rem; /* Space below error description */
}

.error-message button {
  background-color: var(
    --primary-orange
  ); /* Orange background for retry button */
  color: var(--text-inverse); /* White text for contrast */
  border: none; /* Remove default button border */
  padding: 0.75rem 1.5rem; /* Comfortable padding for click area */
  border-radius: 4px; /* Slightly rounded corners */
  cursor: pointer; /* Pointer cursor for interactivity */
  font-size: 1rem; /* Standard readable font size */
}

.error-message button:hover {
  background-color: var(--primary-orange-dark); /* Darker orange on hover */
}

/* Content layout */
.content-layout {
  display: flex; /* Use flexbox for side-by-side layout */
  height: 100%; /* Use full height of parent container */
  width: 100%; /* Use full width of parent container */
  position: relative; /* Establish positioning context for absolute children */
}

/* Mobile content layout adjustments */
@media (max-width: 768px) {
  .content-layout {
    height: 100%; /* Maintain full height on mobile */
    flex-direction: row; /* Keep side-by-side layout even on mobile */
    overflow: hidden; /* Prevent main viewport scroll on mobile */
  }
}

/* Filter Sidebar */
.filter-sidebar {
  width: 300px; /* Fixed width for sidebar on desktop */
  background-color: var(--bg-sidebar); /* Sidebar-specific background color */
  border-right: 1px solid var(--border-light); /* Right border to separate from main content */
  padding: 1rem; /* Comfortable padding around sidebar content */
  display: flex; /* Flexbox layout for sidebar content */
  flex-direction: column; /* Stack sidebar elements vertically */
  transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth theme transitions */
}

/* Mobile sidebar optimizations */
@media (max-width: 768px) {
  .filter-sidebar {
    position: absolute; /* Overlay sidebar on mobile */
    top: 0; /* Position at top of container */
    left: 0; /* Position at left edge */
    width: 300px; /* Maintain fixed width on mobile */
    height: 100%; /* Full height of container */
    z-index: 50; /* High z-index to appear above main content */
    box-shadow: var(--shadow-lg); /* Large shadow for overlay effect */
    transform: translateX(-100%); /* Initially hidden off-screen to the left */
    transition: transform 0.3s ease, background-color 0.3s ease,
      border-color 0.3s ease; /* Smooth slide transition */
    display: flex; /* Maintain flexbox layout */
    flex-direction: column; /* Maintain vertical stacking */
  }

  .filter-sidebar:not(.collapsed-mobile) {
    transform: translateX(0); /* Slide in when not collapsed */
  }

  .filter-sidebar.collapsed-mobile {
    transform: translateX(-100%); /* Slide out when collapsed */
  }

  /* Ensure filter sections scroll properly on mobile */
  .filter-sections {
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    overscroll-behavior: contain; /* Prevent scroll chaining to parent */
  }
} /* Mobile sidebar toggle button */
.mobile-sidebar-toggle {
  display: none; /* Hidden by default on desktop */
  background: var(--primary-orange); /* Orange background for visibility */
  color: var(--text-inverse); /* White text for contrast */
  border: none; /* Remove default button border */
  border-radius: 4px; /* Slightly rounded corners */
  padding: 0.75rem 1rem; /* Comfortable padding for touch interaction */
  cursor: pointer; /* Pointer cursor for interactivity */
  font-size: 0.9rem; /* Slightly smaller font size */
  font-weight: 600; /* Semi-bold for emphasis */
  line-height: 1; /* Tight line height for compact button */
  transition: background-color 0.2s ease; /* Smooth color transition */
  width: 100%; /* Full width by default */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Mobile sidebar toggle hover effect */
.mobile-sidebar-toggle:hover {
  background: var(--primary-orange-dark); /* Darker orange on hover */
}

/* Mobile sidebar toggle display and positioning on mobile devices */
@media (max-width: 768px) {
  /* Toggle button in sidebar header - fixed positioning */
  .filter-sidebar .mobile-sidebar-toggle {
    display: block; /* Show the toggle button on mobile */
    position: relative; /* Relative positioning within sidebar */
    width: auto; /* Auto width for inline content */
    padding: 8px 12px; /* Compact padding for header placement */
    border-radius: 6px; /* Rounded corners for modern look */
    z-index: auto; /* Standard z-index for header element */
    box-shadow: none; /* No shadow needed in sidebar header */
  }

  /* Toggle button in upload controls - inline display */
  .image-grid-container .mobile-sidebar-toggle {
    display: block; /* Show the toggle button on mobile */
    position: static; /* Static positioning for normal flow */
    width: auto; /* Auto width for content */
    min-width: 48px; /* Minimum touch target size */
    padding: 12px; /* Generous padding for touch interaction */
    border-radius: 8px; /* Rounded corners for modern look */
    z-index: auto; /* Standard z-index for inline element */
    box-shadow: var(--shadow-sm); /* Subtle shadow for elevation */
  }
}

/* Sidebar header container */
.sidebar-header {
  display: flex; /* Flexbox for header layout */
  justify-content: space-between; /* Space between title and controls */
  align-items: center; /* Vertically center items */
  margin-bottom: 0.75rem; /* Space below header */
  flex-shrink: 0; /* Prevent header from shrinking */
}

/* Sidebar header title */
.sidebar-header h3 {
  margin: 0; /* Remove default margin */
  color: var(--text-primary); /* Use theme text color */
  font-size: 1.1rem; /* Slightly larger than body text */
}

/* Sidebar content container - main scrollable area */
.sidebar-content {
  display: flex; /* Flexbox for vertical layout */
  flex-direction: column; /* Stack children vertically */
  flex: 1; /* Take remaining space after header */
  min-height: 0; /* Allow flex items to shrink below content size */
}

/* Create Tag Section container */
.create-tag-section {
  margin-bottom: 1rem; /* Space below section */
  padding-bottom: 0.75rem; /* Padding at bottom for visual separation */
  border-bottom: 1px solid var(--border-light); /* Light border separator */
  flex-shrink: 0; /* Prevent section from shrinking */
}

/* Create tag button styling */
.create-tag-btn {
  background: linear-gradient(
    135deg,
    var(--success-green),
    var(--success-green-dark)
  ); /* Green gradient background for positive action */
  color: var(--text-inverse); /* White text for contrast */
  border: none; /* Remove default button border */
  padding: 8px 16px; /* Comfortable padding for button */
  font-size: 14px; /* Readable font size */
  font-weight: 600; /* Semi-bold for emphasis */
  border-radius: 6px; /* Rounded corners for modern look */
  cursor: pointer; /* Pointer cursor for interactivity */
  transition: all 0.3s ease; /* Smooth transitions for all properties */
  box-shadow: var(--shadow-sm); /* Subtle shadow for elevation */
  width: 100%; /* Full width button */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Create tag button hover effect */
.create-tag-btn:hover {
  box-shadow: var(--shadow-md); /* Enhanced shadow on hover */
  background: linear-gradient(
    135deg,
    var(--success-green-dark),
    #2e7d32
  ); /* Darker gradient on hover */
}

/* Create tag button active state */
.create-tag-btn:active {
  transform: translateY(0); /* Reset any transform on active state */
}

/* Mobile create-tag-btn responsive adjustments */
@media (max-width: 768px) {
  .create-tag-btn {
    padding: 12px 16px; /* Increased padding for better touch targets */
    font-size: 16px; /* Larger font size for mobile readability */
    min-height: 48px; /* Larger minimum height for touch targets */
  }
}

/* Filter Sections container styling */
.filter-sections {
  display: flex; /* Flexbox for vertical layout */
  flex-direction: column; /* Stack sections vertically */
  gap: 0.75rem; /* Space between filter sections */
  overflow-y: auto; /* Allow vertical scrolling when content overflows */
  flex: 1; /* Take remaining space in sidebar */
  min-height: 0; /* Allow flex item to shrink below content size */
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS devices */
}

/* Hide scrollbar on desktop while keeping scroll functionality */
@media (min-width: 769px) {
  .filter-sections {
    scrollbar-width: none; /* Hide scrollbar in Firefox */
    -ms-overflow-style: none; /* Hide scrollbar in Internet Explorer 10+ */
  }

  .filter-sections::-webkit-scrollbar {
    display: none; /* Hide scrollbar in Safari and Chrome */
  }
}

/* Individual filter section styling */
.filter-section {
  border: 1px solid var(--border-light); /* Light border around section */
  border-radius: 8px; /* Rounded corners for modern look */
  background: var(--bg-primary); /* Theme background color */
  transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transitions */
}

/* Nested filter section styling (sub-sections) */
.filter-section .filter-section {
  border: none; /* Remove border for nested sections */
  border-radius: 0; /* Remove border radius for nested sections */
  margin-left: 0; /* No left margin for nested sections */
  background: var(--bg-secondary); /* Secondary background for hierarchy */
  border-top: 1px solid var(--border-light); /* Top border separator */
}

/* Section header button styling */
.section-header {
  width: 100%; /* Full width header */
  display: flex; /* Flexbox for content alignment */
  align-items: center; /* Vertically center content */
  gap: 0.5rem; /* Space between icon and text */
  padding: 0.6rem 0.75rem; /* Comfortable padding for clickable area */
  background: none; /* Transparent background */
  border: none; /* Remove default button border */
  cursor: pointer; /* Pointer cursor for interactivity */
  font-size: 0.95rem; /* Slightly smaller than body text */
  font-weight: 600; /* Semi-bold for emphasis */
  color: var(--text-primary); /* Theme text color */
  transition: background-color 0.2s ease; /* Smooth background transition */
}

/* Family-level headers (top level) styling */
.filter-section > .section-header {
  font-size: 0.85rem; /* Smaller font for top-level headers */
  font-weight: 700; /* Bold for hierarchy emphasis */
  color: var(--primary-orange); /* Orange color for top-level sections */
  padding: 0.5rem 0.75rem; /* Slightly reduced padding for top-level */
  background-color: rgba(255, 152, 0, 0.05); /* Light orange background tint */
  border-bottom: 1px solid rgba(255, 152, 0, 0.1); /* Subtle orange border */
}

/* Family-level header hover effect */
.filter-section > .section-header:hover {
  background-color: rgba(255, 152, 0, 0.1); /* Slightly more orange on hover */
}

/* General section header hover effect */
.section-header:hover {
  background-color: var(--bg-secondary); /* Secondary background on hover */
}

/* Nested section headers (sub-level) styling */
.filter-section .filter-section .section-header {
  font-size: 0.85rem; /* Consistent font size for sub-headers */
  padding: 0.4rem 0.75rem; /* Reduced padding for sub-headers */
  background-color: transparent; /* Transparent background for sub-headers */
}

/* Nested section header hover effect */
.filter-section .filter-section .section-header:hover {
  background-color: var(--bg-tertiary); /* Tertiary background on hover */
}

/* Section caret/arrow icon styling */
.section-caret {
  font-size: 0.8rem; /* Small icon size */
  transition: transform 0.2s ease; /* Smooth rotation transition */
  color: var(--primary-orange); /* Orange color for visibility */
}

/* Family-level carets (top-level sections) */
.filter-section > .section-header .section-caret {
  color: var(--primary-orange); /* Orange color for family-level carets */
  font-weight: bold; /* Bold weight for emphasis */
}

/* Collapsed state caret rotation */
.section-caret.collapsed {
  transform: rotate(-90deg); /* Rotate 90 degrees when collapsed */
}

/* Section title text styling */
.section-title {
  flex: 1; /* Take remaining space after caret */
  text-align: left; /* Left-align text */
}

/* Filter list container */
.filter-list {
  display: flex; /* Flexbox for vertical layout */
  flex-direction: column; /* Stack filter items vertically */
  gap: 0.25rem; /* Small gap between filter items */
  padding: 0.5rem 0.5rem 0.5rem 0.5rem; /* Consistent padding around list */
}

/* Individual filter item container */
.filter-item {
  display: flex; /* Flexbox for horizontal layout */
  align-items: center; /* Vertically center content */
  cursor: pointer; /* Pointer cursor for interactivity */
  padding: 0.75rem; /* Comfortable padding for clickable area */
  border-radius: 6px; /* Rounded corners for modern look */
  transition: all 0.2s ease; /* Smooth transitions for all properties */
  border: 1px solid transparent; /* Transparent border for hover effects */
  position: relative; /* Positioning context for pseudo-elements */
  justify-content: space-between; /* Space between label and count */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Only show hover effects on devices that support hovering */
@media (hover: hover) {
  .filter-item:hover {
    background-color: var(--bg-secondary); /* Secondary background on hover */
    border-color: var(--border-light); /* Light border on hover */
  }

  .filter-item.selected:hover {
    background-color: var(
      --primary-orange-dark
    ); /* Darker orange when selected and hovered */
    border-color: var(--primary-orange-dark); /* Matching border color */
  }
}

/* Selected filter item styling */
.filter-item.selected {
  background-color: var(--primary-orange); /* Orange background when selected */
  color: var(--text-inverse); /* White text for contrast */
  border-color: var(--primary-orange-dark); /* Darker orange border */
  box-shadow: var(--shadow-sm); /* Subtle shadow for elevation */
}

/* Mobile filter item responsive adjustments */
@media (max-width: 768px) {
  .filter-item {
    padding: 1rem 0.75rem; /* Increased padding for better touch targets */
    min-height: 48px; /* Larger minimum height for mobile touch targets */
  }

  .filter-label {
    font-size: 1rem; /* Larger font size for mobile readability */
    font-weight: 500; /* Medium weight for mobile */
  }
}

/* Filter label text styling */
.filter-label {
  font-weight: 500; /* Medium weight for readability */
  color: inherit; /* Inherit color from parent element */
  flex: 1; /* Take remaining space after actions */
  text-align: left; /* Left-align text */
}

/* Filter item actions container */
.filter-item-actions {
  display: flex; /* Flexbox for horizontal layout */
  align-items: center; /* Vertically center actions */
  gap: 0.5rem; /* Space between action buttons */
  opacity: 1; /* Always visible for touch devices */
  transition: opacity 0.2s ease; /* Smooth opacity transition */
}

/* Only show hover effects for edit buttons on devices that support hovering */
@media (hover: hover) {
  .filter-item-actions {
    opacity: 0; /* Hidden by default on hover-capable devices */
  }

  .filter-item:hover .filter-item-actions {
    opacity: 1; /* Show actions when hovering over filter item */
  }
}

/* Edit tag button styling */
.edit-tag-btn {
  background: none; /* Transparent background */
  border: none; /* Remove default button border */
  color: var(--text-secondary); /* Secondary text color */
  cursor: pointer; /* Pointer cursor for interactivity */
  padding: 0.25rem; /* Small padding for clickable area */
  border-radius: 4px; /* Rounded corners */
  font-size: 14px; /* Small font size for icon/text */
  transition: all 0.2s ease; /* Smooth transitions */
  display: flex; /* Flexbox for content centering */
  align-items: center; /* Vertically center content */
  justify-content: center; /* Horizontally center content */
}

/* Only show hover effects for edit buttons on devices that support hovering */
@media (hover: hover) {
  .edit-tag-btn:hover {
    background-color: var(--bg-secondary); /* Secondary background on hover */
    color: var(--text-primary); /* Primary text color on hover */
  }
}

/* Image Grid Container - main content area */
.image-grid-container {
  flex: 1; /* Take remaining space after sidebar */
  padding: 1.5rem; /* Generous padding around content */
  overflow-y: auto; /* Allow vertical scrolling when content overflows */
  background-color: var(--bg-primary); /* Theme background color */
  transition: background-color 0.3s ease; /* Smooth background transition */
}

/* Mobile image grid container responsive adjustments */
@media (max-width: 768px) {
  .image-grid-container {
    width: 100%; /* Full width on mobile */
    padding: 1rem; /* Reduced padding for mobile */
    flex: 1; /* Take remaining space */
    overflow-y: auto; /* Allow vertical scrolling */
    overflow-x: hidden; /* Prevent horizontal scroll on mobile */
    min-height: 0; /* Allow flex item to shrink below content size */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS devices */
    overscroll-behavior: contain; /* Prevent scroll chaining to parent */
    /* Extra bottom padding to prevent cutoff from mobile browser UI */
    padding-bottom: 2rem; /* Increased to ensure content is visible */
    /* Ensure scroll container has defined boundaries */
    position: relative; /* Positioning context for child elements */
    /* Ensure scroll starts at top */
    scroll-behavior: smooth; /* Smooth scrolling behavior */
  }
}

/* Small mobile device adjustments */
@media (max-width: 480px) {
  .image-grid-container {
    padding: 0.75rem; /* Further reduced padding for small screens */
    /* Extra bottom padding for small mobile screens to prevent cutoff */
    padding-bottom: 2.5rem; /* More space to avoid mobile browser UI */
  }
}

/* Upload Section container */
.upload-section {
  margin-bottom: 2rem; /* Space below upload section */
  padding-bottom: 1.5rem; /* Padding at bottom for visual separation */
  border-bottom: 2px solid var(--border-light); /* Strong border separator */
}

/* Upload controls layout */
.upload-controls {
  display: flex; /* Flexbox for horizontal layout */
  align-items: center; /* Vertically center controls */
  gap: 2rem; /* Space between upload controls */
  flex-wrap: wrap; /* Allow wrapping on smaller screens */
}

/* Main upload button styling */
.upload-btn-main {
  background: #2196f3; /* Blue background for primary action */
  color: var(--text-inverse); /* White text for contrast */
  border: none; /* Remove default button border */
  padding: 16px 32px; /* Generous padding for prominent button */
  font-size: 18px; /* Large font size for importance */
  font-weight: 600; /* Semi-bold for emphasis */
  border-radius: 8px; /* Rounded corners for modern look */
  cursor: pointer; /* Pointer cursor for interactivity */
  transition: all 0.3s ease; /* Smooth transitions for all properties */
  box-shadow: var(--shadow-md); /* Medium shadow for elevation */
  min-width: 200px; /* Minimum width for consistency */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Upload button hover effect */
.upload-btn-main:hover {
  box-shadow: var(--shadow-lg); /* Larger shadow on hover */
  background: #1976d2; /* Darker blue on hover */
}

/* Upload button active state */
.upload-btn-main:active {
  transform: translateY(0); /* Reset any transform on active state */
}

/* Mobile upload section responsive adjustments */
@media (max-width: 768px) {
  .upload-section {
    margin-bottom: 1.5rem; /* Reduced margin for mobile */
    padding-bottom: 1rem; /* Reduced padding for mobile */
  }

  .upload-controls {
    flex-direction: row; /* Keep horizontal layout on mobile */
    align-items: center; /* Vertically center controls */
    gap: 1rem; /* Reduced gap for mobile */
    flex-wrap: wrap; /* Allow wrapping on small screens */
  }

  .upload-btn-main {
    flex: 1; /* Take available space */
    min-width: 150px; /* Reduced minimum width for mobile */
    padding: 18px 24px; /* Adjusted padding for mobile */
    font-size: 18px; /* Consistent font size */
    min-height: 48px; /* Larger touch target for mobile */
  }

  /* Mobile filter toggle button in upload controls */
  .image-grid-container .mobile-sidebar-toggle {
    position: static; /* Static positioning for normal flow */
    flex-shrink: 0; /* Prevent button from shrinking */
    min-width: 48px; /* Minimum touch target size */
    padding: 18px 12px; /* Consistent padding with upload button */
    margin: 0; /* Reset margins */
    order: -1; /* Put it before the upload button in flex order */
  }
}

/* Extra small mobile adjustments - only for very narrow screens */
@media (max-width: 380px) {
  .upload-controls {
    flex-direction: column; /* Stack controls vertically on very small screens */
    align-items: stretch; /* Stretch items to full width */
    gap: 0.75rem; /* Reduced gap for vertical layout */
  }

  .upload-btn-main {
    width: 100%; /* Full width on very small screens */
    order: 0; /* Reset order for vertical layout */
  }

  .image-grid-container .mobile-sidebar-toggle {
    width: 100%; /* Full width toggle button */
    order: -1; /* Keep it above upload button */
    text-align: center; /* Center-align text */
  }

  .family-filter {
    width: 100%; /* Full width family filter */
    order: 1; /* Put family filter last in vertical stack */
  }
}

/* Medium mobile portrait adjustments - keep horizontal layout */
@media (max-width: 480px) and (min-width: 381px) {
  .upload-controls {
    flex-wrap: wrap; /* Allow wrapping for medium mobile */
    gap: 0.75rem; /* Reduced gap for tighter layout */
  }

  .image-grid-container .mobile-sidebar-toggle {
    order: -1; /* Keep toggle before upload button */
    flex-shrink: 0; /* Prevent button from shrinking */
  }

  .upload-btn-main {
    flex: 1; /* Take available space */
    min-width: 140px; /* Reduced minimum width for medium mobile */
  }

  .family-filter {
    width: 100%; /* Full width family filter */
    order: 1; /* Put family filter on new line below buttons */
  }
}

/* Family Filter container */
.family-filter {
  display: flex; /* Flexbox for horizontal layout */
  align-items: center; /* Vertically center label and dropdown */
  gap: 0.5rem; /* Space between label and dropdown */
}

/* Family filter label styling */
.family-filter label {
  font-weight: 500; /* Medium weight for emphasis */
  color: var(--text-primary); /* Theme text color */
  font-size: 1rem; /* Standard font size */
}

/* Family dropdown select styling */
.family-dropdown {
  padding: 8px 12px; /* Comfortable padding for dropdown */
  border: 2px solid var(--border-medium); /* Medium border for definition */
  border-radius: 6px; /* Rounded corners for modern look */
  background: var(--bg-secondary); /* Secondary background color */
  color: var(--text-primary); /* Theme text color */
  font-size: 0.95rem; /* Slightly smaller than body text */
  font-weight: 500; /* Medium weight for readability */
  cursor: pointer; /* Pointer cursor for interactivity */
  transition: all 0.2s ease; /* Smooth transitions for all properties */
  min-width: 150px; /* Minimum width for consistency */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Family dropdown focus state */
.family-dropdown:focus {
  outline: none; /* Remove default focus outline */
  border-color: var(--primary-orange); /* Orange border when focused */
  box-shadow: 0 0 0 3px rgba(255, 127, 0, 0.1); /* Orange focus ring */
}

/* Family dropdown hover effect */
.family-dropdown:hover {
  border-color: var(--border-dark); /* Darker border on hover */
}

/* Mobile family filter responsive adjustments */
@media (max-width: 768px) {
  .family-filter {
    justify-content: space-between; /* Space between label and dropdown */
    width: 100%; /* Full width on mobile */
  }

  .family-filter label {
    font-size: 1rem; /* Consistent font size on mobile */
    flex-shrink: 0; /* Prevent label from shrinking */
  }

  .family-dropdown {
    flex: 1; /* Take remaining space after label */
    min-width: auto; /* Remove minimum width constraint */
    font-size: 1rem; /* Larger font size for mobile readability */
    padding: 12px; /* Increased padding for better touch targets */
    min-height: 48px; /* Larger touch target for mobile */
  }
}

/* Mobile backdrop for sidebar overlay */
.sidebar-backdrop {
  display: none; /* Hidden by default on desktop */
}

/* Mobile sidebar backdrop styling */
@media (max-width: 768px) {
  .sidebar-backdrop {
    display: block; /* Show backdrop on mobile when needed */
    position: absolute; /* Absolute positioning to overlay content */
    top: 0; /* Cover full height from top */
    left: 0; /* Cover full width from left */
    right: 0; /* Cover full width to right */
    bottom: 0; /* Cover full height to bottom */
    background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black overlay */
    z-index: 40; /* High z-index to appear above content */
    opacity: 0; /* Hidden by default */
    visibility: hidden; /* Hidden by default */
    transition: opacity 0.3s ease, visibility 0.3s ease; /* Smooth fade transitions */
  }

  .sidebar-backdrop.visible {
    opacity: 1; /* Fully visible when active */
    visibility: visible; /* Make visible when active */
  }
}

/* Responsive adjustments - Updated mobile styles */
@media (max-width: 768px) {
  /* Sidebar content maintains flex layout on mobile */
  .sidebar-content {
    display: flex; /* Maintain flexbox layout */
    flex-direction: column; /* Stack children vertically */
    flex: 1; /* Take remaining space */
    min-height: 0; /* Allow shrinking below content size */
    overflow: visible; /* Allow content to be visible */
  }

  .sidebar-content.hidden-mobile {
    opacity: 1; /* Keep content fully visible */
    visibility: visible; /* Ensure content is visible */
    max-height: none; /* Remove height constraints */
    padding: inherit; /* Use inherited padding */
    display: flex; /* Maintain flexbox layout */
    flex-direction: column; /* Stack children vertically */
    flex: 1; /* Take remaining space */
    min-height: 0; /* Allow shrinking below content size */
  }
}

/* Empty State container when no images are found */
.empty-state {
  display: flex; /* Flexbox for centering content */
  align-items: center; /* Vertically center text */
  justify-content: center; /* Horizontally center text */
  height: 200px; /* Fixed height for empty state */
  color: var(--text-muted); /* Muted text color for subtle appearance */
  font-size: 1.1rem; /* Slightly larger font for visibility */
}

/* Image Grid - main photo gallery layout */
.image-grid {
  display: grid; /* CSS Grid for image layout */
  grid-template-columns: repeat(
    auto-fill,
    280px
  ); /* Auto-fill columns with 280px width */
  gap: 1.5rem; /* Space between grid items */
  justify-content: start; /* Align grid to start of container */
  margin-bottom: 2rem; /* Base padding below last row */
}

/* Mobile image grid responsive adjustments */
@media (max-width: 768px) {
  .image-grid {
    grid-template-columns: repeat(
      auto-fill,
      minmax(200px, 1fr)
    ); /* Responsive columns */
    gap: 1rem; /* Reduced gap for mobile */
    justify-content: center; /* Center grid on mobile */
  }
}

/* Small mobile image grid adjustments */
@media (max-width: 480px) {
  .image-grid {
    grid-template-columns: repeat(
      auto-fill,
      minmax(150px, 1fr)
    ); /* Smaller columns */
    gap: 0.75rem; /* Further reduced gap */
    margin-bottom: 1.5rem; /* Additional space at bottom for small mobile */
  }
}

/* Very small mobile image grid adjustments */
@media (max-width: 360px) {
  .image-grid {
    grid-template-columns: 1fr 1fr; /* Fixed two-column layout */
    gap: 0.5rem; /* Minimal gap for very small screens */
    margin-bottom: 2rem; /* Extra space for very small screens */
  }
}

/* Image Cards - individual photo containers */
.image-card {
  background: var(--bg-primary); /* Theme background color */
  border-radius: 8px; /* Rounded corners for modern look */
  box-shadow: var(--shadow-sm); /* Subtle shadow for elevation */
  overflow: hidden; /* Hide content that extends beyond borders */
  border: 1px solid var(--border-light); /* Light border for definition */
  cursor: pointer; /* Pointer cursor indicating clickability */
  transition: transform 0.2s ease, box-shadow 0.2s ease,
    background-color 0.3s ease; /* Smooth transitions for interactions */
}

/* Image card hover effect */
.image-card:hover {
  box-shadow: var(--shadow-lg); /* Enhanced shadow on hover */
}

/* Image container within each card */
.image-container {
  height: 200px; /* Fixed height for consistent grid layout */
  overflow: hidden; /* Hide image overflow */
  background: var(--bg-secondary); /* Fallback background color */
  display: flex; /* Flexbox for image centering */
  align-items: center; /* Vertically center image */
  justify-content: center; /* Horizontally center image */
}

/* Image display within container */
.image-display {
  width: 100%; /* Full width of container */
  height: 100%; /* Full height of container */
  object-fit: cover; /* Cover container while maintaining aspect ratio */
  transition: transform 0.2s ease; /* Smooth scale transition on hover */
}

/* Image hover zoom effect */
.image-card:hover .image-display {
  transform: scale(1.05); /* Slight zoom on hover */
}

/* Image placeholder for loading/missing images */
.image-placeholder {
  height: 200px; /* Match image container height */
  background: linear-gradient(
    135deg,
    var(--bg-secondary) 0%,
    var(--bg-tertiary) 100%
  ); /* Gradient background for visual interest */
  display: flex; /* Flexbox for centering content */
  align-items: center; /* Vertically center content */
  justify-content: center; /* Horizontally center content */
  font-size: 3rem; /* Large icon/text size */
  color: var(--text-muted); /* Muted color for placeholder */
  transition: background 0.3s ease; /* Smooth background transition */
}

/* Image info section below image */
.image-info {
  padding: 1rem 0.5rem; /* Padding around image information */
}

/* Image title styling */
.image-info h4 {
  margin: 0 0 0.5rem 0; /* Remove top margin, add bottom margin */
  color: var(--text-primary); /* Theme text color */
  font-size: 1rem; /* Standard font size */
}

/* Image tags container */
.image-tags {
  display: flex; /* Flexbox for tag layout */
  flex-wrap: wrap; /* Allow tags to wrap to next line */
  gap: 0.25rem; /* Small gap between tags */
}

/* Individual tag chip styling */
.tag-chip {
  background-color: var(--primary-orange); /* Orange background for tags */
  color: var(--text-inverse); /* White text for contrast */
  padding: 0.25rem 0.5rem; /* Compact padding for chips */
  border-radius: 12px; /* Rounded pill shape */
  font-size: 0.75rem; /* Small font size for chips */
  font-weight: 500; /* Medium weight for readability */
}

/* No tags placeholder text */
.no-tags {
  color: var(--text-muted); /* Muted color for placeholder */
  font-style: italic; /* Italic styling for placeholder text */
  font-size: 0.75rem; /* Small font size */
}

/* Modal Styles - full-screen image viewer */
.modal-overlay {
  position: fixed; /* Fixed positioning to cover viewport */
  top: 0; /* Cover from top */
  left: 0; /* Cover from left */
  right: 0; /* Cover to right */
  bottom: 0; /* Cover to bottom */
  background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent black backdrop */
  display: flex; /* Flexbox for centering modal */
  justify-content: center; /* Horizontally center modal */
  align-items: center; /* Vertically center modal */
  z-index: 1000; /* High z-index to appear above all content */
  padding: 1rem; /* Padding around modal */
  backdrop-filter: blur(2px); /* Subtle blur effect for backdrop */
  /* Prevent background scrolling */
  overscroll-behavior: contain; /* Prevent scroll chaining */
}

/* Modal content container */
.modal-content {
  background: var(--bg-primary); /* Theme background color */
  border-radius: 12px; /* Rounded corners for modern look */
  width: 100%; /* Full width of container */
  max-width: 600px; /* Maximum width for desktop */
  max-height: 85vh; /* Maximum height relative to viewport */
  overflow-y: auto; /* Allow vertical scrolling if content overflows */
  box-shadow: var(--shadow-lg); /* Large shadow for elevation */
  border: 1px solid var(--border-light); /* Light border for definition */
  transition: all 0.3s ease; /* Smooth transitions for modal animations */
  position: relative; /* Positioning context for child elements */
  /* Ensure modal content is above everything */
  z-index: 1001; /* Higher z-index than overlay */
}

/* Mobile modal responsive optimizations */
@media (max-width: 768px) {
  .modal-overlay {
    padding: 0; /* Remove padding on mobile */
    align-items: flex-start; /* Align to top on mobile */
    /* Use full viewport height accounting for mobile browser bars */
    height: 100vh; /* Standard viewport height */
    height: 100dvh; /* Dynamic viewport height for mobile browsers */
    /* Prevent scrolling through modal */
    touch-action: none; /* Disable touch scrolling on overlay */
    overflow: hidden; /* Hide overflow on mobile */
  }

  .modal-content {
    width: 100%; /* Full width on mobile */
    max-width: none; /* Remove width constraint */
    /* Account for mobile browser UI and safe areas */
    height: 100vh; /* Standard viewport height */
    height: 100dvh; /* Dynamic viewport height */
    max-height: none; /* Remove height constraint */
    border-radius: 0; /* Remove border radius for full-screen */
    margin: 0; /* Remove margins */
    /* Prevent content from going behind browser UI */
    padding-bottom: env(safe-area-inset-bottom, 20px); /* Safe area padding */
    display: flex; /* Flexbox layout for mobile */
    flex-direction: column; /* Stack elements vertically */
    /* Ensure smooth scrolling */
    -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
    overscroll-behavior: contain; /* Prevent scroll chaining */
  }
}

/* Tag type select dropdown styling */
.tag-type-select {
  width: 100%; /* Full width select */
  padding: 10px 12px; /* Comfortable padding */
  border: 2px solid var(--border-light); /* Light border */
  border-radius: 6px; /* Rounded corners */
  font-size: 16px; /* Standard font size */
  transition: border-color 0.2s ease, background-color 0.3s ease; /* Smooth transitions */
  box-sizing: border-box; /* Include padding in width calculation */
  background-color: var(--bg-primary); /* Theme background color */
  color: var(--text-primary); /* Theme text color */
  cursor: pointer; /* Pointer cursor for dropdown */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Tag type select focus state */
.tag-type-select:focus {
  outline: none; /* Remove default focus outline */
  border-color: var(--primary-orange); /* Orange border when focused */
}

/* Mobile tag type select responsive optimizations */
@media (max-width: 768px) {
  .tag-type-select {
    padding: 14px 16px; /* Increased padding for mobile */
    font-size: 16px; /* Consistent font size for mobile */
    border-radius: 8px; /* Larger border radius for modern look */
    min-height: 48px; /* Larger touch target for mobile */
    border-width: 2px; /* Consistent border width */
  }
}

/* Tag selection container */
.tag-selection {
  /* Remove height constraints to allow natural expansion */
  border: 1px solid var(--border-light); /* Light border around selection area */
  border-radius: 6px; /* Rounded corners */
  padding: 16px; /* Padding around tag selection content */
  background-color: var(--bg-primary); /* Theme background color */
  transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transitions */
}

/* Mobile tag selection responsive optimizations */
@media (max-width: 768px) {
  .tag-selection {
    /* Remove height constraints for mobile too */
    padding: 12px; /* Reduced padding for mobile */
    border-radius: 8px; /* Larger border radius for modern mobile look */
  }
}

/* Tag group container */
.tag-group {
  margin-bottom: 20px; /* Space between tag groups */
}

/* Remove margin from last tag group */
.tag-group:last-child {
  margin-bottom: 0; /* No margin after last group */
}

/* Tag group title styling */
.tag-group h4 {
  margin: 0 0 12px 0; /* Remove top margin, add bottom margin */
  color: var(--primary-orange); /* Orange color for group headers */
  font-size: 1rem; /* Standard font size */
  font-weight: 600; /* Semi-bold for emphasis */
}

/* Mobile tag group responsive optimizations */
@media (max-width: 768px) {
  .tag-group {
    margin-bottom: 16px; /* Reduced margin for mobile */
  }

  .tag-group h4 {
    margin: 0 0 8px 0; /* Reduced bottom margin for mobile */
    font-size: 1rem; /* Consistent font size */
    font-weight: 600; /* Consistent font weight */
  }
}

/* Tag checkboxes grid layout */
.tag-checkboxes {
  display: grid; /* CSS Grid for checkbox layout */
  grid-template-columns: repeat(
    auto-fill,
    minmax(180px, 1fr)
  ); /* Responsive columns */
  gap: 8px; /* Space between checkbox items */
}

/* Mobile tag checkboxes responsive optimizations */
@media (max-width: 768px) {
  .tag-checkboxes {
    grid-template-columns: repeat(
      auto-fill,
      minmax(140px, 1fr)
    ); /* Smaller columns for mobile */
    gap: 6px; /* Reduced gap for mobile */
  }
}

/* Small mobile tag checkboxes adjustments */
@media (max-width: 480px) {
  .tag-checkboxes {
    grid-template-columns: 1fr 1fr; /* Fixed two-column layout */
    gap: 8px; /* Consistent gap for small mobile */
  }
}

/* Very small mobile tag checkboxes adjustments */
@media (max-width: 360px) {
  .tag-checkboxes {
    grid-template-columns: 1fr; /* Single column for very small screens */
    gap: 6px; /* Minimal gap for very small screens */
  }
}

/* Individual tag checkbox styling */
.tag-checkbox {
  display: flex; /* Flexbox for content centering */
  align-items: center; /* Vertically center content */
  justify-content: center; /* Horizontally center content */
  padding: 8px 12px; /* Comfortable padding for touch interaction */
  border-radius: 6px; /* Rounded corners */
  cursor: pointer; /* Pointer cursor for interactivity */
  transition: all 0.2s ease; /* Smooth transitions for all properties */
  color: var(--text-primary); /* Theme text color */
  border: 1px solid var(--border-light); /* Light border */
  background-color: var(--bg-primary); /* Theme background color */
  text-align: center; /* Center-align text */
  font-size: 14px; /* Small font size for checkboxes */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Tag checkbox hover effect */
.tag-checkbox:hover {
  background-color: var(--bg-secondary); /* Secondary background on hover */
  border-color: var(--border-medium); /* Medium border on hover */
}

/* Selected tag checkbox styling */
.tag-checkbox.selected {
  background-color: var(--secondary-blue); /* Blue background when selected */
  color: var(--text-inverse); /* White text for contrast */
  border-color: var(
    --secondary-blue-dark
  ); /* Darker blue border when selected */
  box-shadow: var(--shadow-sm); /* Subtle shadow for elevation */
}

/* Selected tag checkbox hover effect */
.tag-checkbox.selected:hover {
  background-color: var(
    --secondary-blue-dark
  ); /* Darker blue on hover when selected */
  border-color: var(--secondary-blue-dark); /* Matching border color */
}

/* Mobile tag checkbox responsive optimizations */
@media (max-width: 768px) {
  .tag-checkbox {
    padding: 12px 8px; /* Adjusted padding for mobile */
    font-size: 15px; /* Slightly larger font for mobile readability */
    min-height: 48px; /* Larger touch target for mobile */
    border-radius: 8px; /* Larger border radius for modern mobile look */
    font-weight: 500; /* Medium font weight for mobile */
  }
}

/* Small mobile tag checkbox adjustments */
@media (max-width: 480px) {
  .tag-checkbox {
    padding: 14px 8px; /* Increased padding for better touch targets */
    font-size: 16px; /* Larger font size for small mobile readability */
    min-height: 50px; /* Larger touch target for small mobile */
  }
}

/* Family selection grid layout */
.family-selection {
  display: grid; /* CSS Grid for family selection layout */
  grid-template-columns: repeat(
    auto-fill,
    minmax(180px, 1fr)
  ); /* Responsive columns */
  gap: 8px; /* Space between family items */
  margin-top: 8px; /* Space above family selection */
}

/* Mobile family selection responsive optimizations */
@media (max-width: 768px) {
  .family-selection {
    grid-template-columns: repeat(
      auto-fill,
      minmax(140px, 1fr)
    ); /* Smaller columns for mobile */
    gap: 6px; /* Reduced gap for mobile */
    margin-top: 8px; /* Consistent top margin */
  }
}

/* Small mobile family selection adjustments */
@media (max-width: 480px) {
  .family-selection {
    grid-template-columns: 1fr 1fr; /* Fixed two-column layout for small mobile */
    gap: 8px; /* Consistent gap for small mobile */
  }
}

/* Very small mobile family selection adjustments */
@media (max-width: 360px) {
  .family-selection {
    grid-template-columns: 1fr; /* Single column for very small screens */
    gap: 6px; /* Minimal gap for very small screens */
  }
}

/* Individual family checkbox styling */
.family-checkbox {
  display: flex; /* Flexbox for content centering */
  align-items: center; /* Vertically center content */
  justify-content: center; /* Horizontally center content */
  padding: 8px 12px; /* Comfortable padding for touch interaction */
  border-radius: 6px; /* Rounded corners */
  cursor: pointer; /* Pointer cursor for interactivity */
  transition: all 0.2s ease; /* Smooth transitions for all properties */
  color: var(--text-primary); /* Theme text color */
  border: 1px solid var(--border-light); /* Light border */
  background-color: var(--bg-primary); /* Theme background color */
  text-align: center; /* Center-align text */
  font-size: 14px; /* Small font size for checkboxes */
  min-height: 44px; /* iOS recommended touch target size */
}

/* Family checkbox hover effect */
.family-checkbox:hover {
  background-color: var(--bg-secondary); /* Secondary background on hover */
  border-color: var(--border-medium); /* Medium border on hover */
}

/* Selected family checkbox styling */
.family-checkbox.selected {
  background-color: #ff8c00; /* Orange background when selected */
  color: white; /* White text for contrast */
  border-color: #e67e00; /* Darker orange border when selected */
  box-shadow: var(--shadow-sm); /* Subtle shadow for elevation */
}

/* Selected family checkbox hover effect */
.family-checkbox.selected:hover {
  background-color: #e67e00; /* Darker orange on hover when selected */
  border-color: #cc7000; /* Even darker orange border on hover */
}

/* Mobile family checkbox responsive optimizations */
@media (max-width: 768px) {
  .family-checkbox {
    padding: 12px 8px; /* Adjusted padding for mobile */
    font-size: 15px; /* Slightly larger font for mobile readability */
    min-height: 48px; /* Larger touch target for mobile */
    border-radius: 8px; /* Larger border radius for modern mobile look */
    font-weight: 500; /* Medium font weight for mobile */
  }
}

/* Small mobile family checkbox adjustments */
@media (max-width: 480px) {
  .family-checkbox {
    padding: 14px 8px; /* Increased padding for better touch targets */
    font-size: 16px; /* Larger font size for small mobile readability */
    min-height: 50px; /* Larger touch target for small mobile */
  }
}

/* Empty families message when no families are available */
.empty-families-message {
  width: 100%; /* Full width message */
  padding: 16px; /* Comfortable padding around message */
  background-color: var(
    --bg-secondary
  ); /* Secondary background for differentiation */
  border: 1px solid var(--border-light); /* Light border */
  border-radius: 6px; /* Rounded corners */
  color: var(--text-secondary); /* Secondary text color for subtle appearance */
  font-style: italic; /* Italic styling for informational message */
  text-align: center; /* Center-align text */
  box-sizing: border-box; /* Include padding in width calculation */
}

/* Upload error message styling */
.upload-error-message {
  padding: 12px; /* Padding around error message */
  margin-top: 8px; /* Space above error message */
  background-color: #fee; /* Light red background for error */
  border: 1px solid #fcc; /* Red border for error indication */
  border-radius: 6px; /* Rounded corners */
  color: #c33; /* Dark red text for error */
  font-size: 14px; /* Small font size for error messages */
}

/* Focus improvements for keyboard navigation and accessibility */
@media (max-width: 768px) {
  button:focus,
  .filter-item:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline: 3px solid var(--primary-orange); /* Orange outline for focus visibility */
    outline-offset: 2px; /* Offset outline for better visibility */
  }
}

/* Pagination Controls */
.pagination-controls {
  display: flex; /* Use flexbox for centering */
  justify-content: center; /* Center the load more button */
  padding: 20px 0; /* Vertical padding */
  margin-top: 20px; /* Space above pagination controls */
}

.load-more-btn {
  background-color: var(--primary-orange); /* Orange background */
  color: white; /* White text */
  border: none; /* Remove default border */
  border-radius: 6px; /* Rounded corners */
  padding: 12px 24px; /* Comfortable padding */
  font-size: 16px; /* Clear, readable font size */
  font-weight: 500; /* Medium font weight */
  cursor: pointer; /* Pointer cursor on hover */
  transition: all 0.2s ease; /* Smooth transition for interactions */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Subtle shadow */
}

.load-more-btn:hover:not(:disabled) {
  background-color: var(
    --primary-orange-dark,
    #e67e22
  ); /* Darker orange on hover */
  transform: translateY(-1px); /* Subtle lift effect */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* Enhanced shadow on hover */
}

.load-more-btn:active:not(:disabled) {
  transform: translateY(0); /* Reset transform on click */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* Reset shadow on click */
}

.load-more-btn:disabled {
  background-color: var(--bg-tertiary, #ccc); /* Disabled background */
  color: var(--text-secondary, #666); /* Disabled text color */
  cursor: not-allowed; /* Not-allowed cursor for disabled state */
  transform: none; /* No transform when disabled */
  box-shadow: none; /* No shadow when disabled */
}

/* Mobile responsiveness for pagination */
@media (max-width: 768px) {
  .pagination-controls {
    padding: 16px 0; /* Reduced padding on mobile */
    margin-top: 16px; /* Reduced margin on mobile */
  }

  .load-more-btn {
    padding: 10px 20px; /* Slightly smaller padding on mobile */
    font-size: 15px; /* Slightly smaller font on mobile */
  }
}
